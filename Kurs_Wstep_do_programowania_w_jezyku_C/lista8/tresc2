
Wykorzystany czas	7 dni 22 godzin
Ocena	15,00 pkt. na 15,00 pkt. moÅ¼liwych do uzyskania (100%)
Informacja zwrotna	
Program poprawnie wykonaÅ‚ wszystkie testy.

Pytanie 1
Poprawnie
Punkty: 15,00 z 15,00
Nie oznaczony flagÄ…Oflaguj pytanie
TreÅ›Ä‡ pytania
Zliczanie referencji
W tym zadaniu bÄ™dziemy zajmowaÄ‡ siÄ™ (nieetykietowanymi) drzewami binarnymi. Do ich obsÅ‚ugi bÄ™dziemy uÅ¼ywaÄ‡ trzech zmiennych: ğš¡, ğš¢, ğš£, ktÃ³re poczÄ…tkowo majÄ… wartoÅ›Ä‡ pustego drzewa. Na wejÅ›ciu podanych bÄ™dzie n instrukcji zmieniajÄ…cych wartoÅ›ci zmiennych na cztery sposoby: konstruujÄ…cej, dwÃ³ch dekonstruujÄ…cych i zerujÄ…cej (nadajÄ…cÄ… wartoÅ›Ä‡ pustego drzewa).

W pierwszej linii wejÅ›cia podana jest liczba naturalna n (0 â©½ n â©½ 10000). W nastÄ™pnych n liniach podane sÄ… instrukcje postaci a := v, gdzie a to ğš¡, ğš¢ lub ğš£, a v jest jednÄ… z instrukcji, ktÃ³re ustawiajÄ… wartoÅ›Ä‡ zmiennej a na:

ğš—ğšğš•ğš• â€” puste drzewo,
ğšŒğš˜ğš—ğšœ b c â€” drzewo o nowo zaalokowanym korzeniu, ktÃ³rego lewym poddrzewem jest wartoÅ›Ä‡ zmiennej b, a prawym â€” wartoÅ›Ä‡ zmiennej c,
ğšŒğšŠğš› d â€” drzewo, ktÃ³re jest lewym poddrzewem wartoÅ›ci zmiennej d,
ğšŒğšğš› e â€” drzewo, ktÃ³re jest prawym poddrzewem wartoÅ›ci zmiennej e.
Instrukcje ğšŒğšŠğš› i ğšŒğšğš› nie bÄ™dÄ… podawane dla pustych drzew. PowyÅ¼sze instrukcje same w sobie dziaÅ‚ajÄ… w czasie staÅ‚ym, a wiÄ™c reprezentowane przez nie drzewa nie sÄ… kopiowane, a wspÃ³Å‚dzielone.

Przed wczytaniem pierwszej instrukcji i po wczytaniu kaÅ¼dej instrukcji (czyli n + 1 razy) naleÅ¼y wypisaÄ‡ stan systemu postaci:
ğš›ğš˜ğšğš—ğš:â€€r,â€€ğš¡:â€€x,â€€ğš¢:â€€y,â€€ğš£:â€€z,â€€ğšŒğšğš•ğš•ğšœ:â€€c
gdzie:

r jest liczbÄ… wykonanych instrukcji,
x, y, z sÄ… numerami instrukcji, ktÃ³re zaalokowaÅ‚y korzeÅ„ drzewa przechowywanego przez odpowiednio ğš¡, ğš¢, ğš£, lub zerem, jeÅ›li zmienna przechowuje puste drzewo,
c jest liczbÄ… zaalokowanych wÄ™zÅ‚Ã³w, ktÃ³re sÄ… osiÄ…galne ze zmiennych ğš¡, ğš¢, ğš£.
 PrzykÅ‚ad
Dla wejÅ›cia:

4
x := cons x x
y := cons x x
x := null
y := car y
program powinien wypisaÄ‡:

round: 0, x: 0, y: 0, z: 0, cells: 0
round: 1, x: 1, y: 0, z: 0, cells: 1
round: 2, x: 1, y: 2, z: 0, cells: 2
round: 3, x: 0, y: 2, z: 0, cells: 2
round: 4, x: 0, y: 1, z: 0, cells: 1
WyjaÅ›nienie. Pierwsza instrukcja ustawia wartoÅ›Ä‡ zmiennej ğš¡ na drzewo, ktÃ³rego poddrzewa sÄ… puste, druga â€” wartoÅ›Ä‡ zmiennej ğš¢ na drzewa, ktÃ³rego poddrzewami sÄ… drzewa reprezentowane przez ğš¡. Trzecia instrukcja ustawia wartoÅ›Ä‡ ğš¡ na puste drzewo, ale komÃ³rka zaalokowana przez pierwszÄ… instrukcjÄ™ jest nadal osiÄ…galna z ğš¢. Czwarta instrukcja ustawia wartoÅ›Ä‡ ğš¢ na wartoÅ›Ä‡, ktÃ³rÄ… pierwsza instrukcja nadawaÅ‚a zmiennej ğš¡. Wtedy komÃ³rka zaalokowana przez drugÄ… instrukcjÄ™ przestaje byÄ‡ osiÄ…galna.

WskazÃ³wka. O nieosiÄ…galnych komÃ³rkach moÅ¼emy myÅ›leÄ‡, Å¼e zostajÄ… automatycznie zdealokowane (odÅ›miecone). Wskazania na poddrzewa nigdy nie utworzÄ… cyklu, wiÄ™c do okreÅ›lenia osiÄ…galnoÅ›ci komÃ³rki wystarczy pamiÄ™taÄ‡ liczbÄ™ wskazaÅ„ na niÄ… przez zaalokowane komÃ³rki. JeÅ›li liczba wskazaÅ„ spada do zera, komÃ³rka staje siÄ™ nieosiÄ…galna.
